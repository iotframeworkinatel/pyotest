version: '3.8'

services:
  device1:
    build: ./pyotest/devices/device1
    container_name: iot_device_1
    networks:
      - iot_network
    ports:
      - "5000:5000"

  # device2:
  #   build: ./pyotest/devices/device2
  #   container_name: iot_device_2
  #   networks:
  #     - iot_network

  # device3:
  #   build: ./pyotest/devices/device3
  #   container_name: iot_device_3
  #   networks:
  #     - iot_network

  mqtt_broker:
    image: eclipse-mosquitto
    container_name: mqtt_broker
    ports:
      - "1883:1883"
      - "9001:9001"
    networks:
      - iot_network

  # pyotest:
  #   build: .
  #   container_name: pyotest
  #   volumes:
  #     - .:/app
  #   networks:
  #     - iot_network
  #   depends_on:
  #     - device1
  #     - mqtt_broker

networks:
  iot_network:
    driver: bridge
